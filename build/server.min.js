!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(e,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function u(t){l.default.connect(g.default.DATABASE_URL,function(n){return n&&t?t(n):void(w=N.listen(g.default.PORT,function(){e.log("Listening on localhost:"+g.default.PORT),t&&t()}))})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(6),s=i(o),a=n(7),l=i(a),d=n(8),c=i(d),f=n(9),p=i(f),m=n(10),y=i(m),h=n(15),b=i(h),v=n(19),g=i(v),w=void 0;n.c[0]===r&&u(function(t){t&&e.error(t)});var N=(0,s.default)(),_=c.default.json(),q=c.default.urlencoded({extended:!0});N.use(_),N.use(q),N.use(b.default.initialize()),N.use(s.default.static("client/build")),N.post("/login",b.default.authenticate("local",{failWithError:!0}),function(t,n){var r=t.body.username;y.default.findOne({username:r},function(t,r){return e.log("DEBUG login user found: "+JSON.stringify(r)),n.status(201).json(r)})},function(e,t,n,r){return n.json(e)}),N.post("/users",function(t,n){if(!t.body)return n.status(400).json({message:"No request body"});if(!("username"in t.body))return n.status(422).json({message:"Missing field: username"});var r=t.body.username;if("string"!=typeof r)return n.status(422).json({message:"Incorrect field type: username"});if(r=r.trim(),""===r)return n.status(422).json({message:"Incorrect field length: username"});if(!("password"in t.body))return n.status(422).json({message:"Missing field: password"});var i=t.body.password;return"string"!=typeof i?n.status(422).json({message:"Incorrect field type: password"}):(i=i.trim(),""===i?n.status(422).json({message:"Incorrect field length: password"}):void p.default.genSalt(10,function(u,o){return u?n.status(500).json({message:"salt error"+u}):void p.default.hash(i,o,function(i,u){if(i)return n.status(500).json({message:"encryption error"+i});var o=t.body.firstname,s=t.body.lastname,a=[{assets:[{type:"",description:"",net_value:0,index:0}],liabilities:[{type:"",description:"",remaining_amount:0,index:0}],stats:[{net:0,totalDebt:0,totalAssets:0}]}],l=new y.default({username:r,password:u,firstname:o,lastname:s,currentNetworth:a,netWorth:[{year:(new Date).getUTCFullYear(),month:(new Date).getUTCMonth(),details:a}]});l.save(function(t){return t?n.status(500).json({message:"Database Error"}):(e.log("DEBUG with init networh "+JSON.stringify(l)),n.status(201).json(l))})})}))}),N.put("/liability",function(e,t){if(!e.body)return t.status(400).json({message:"No request body"});var n=e.body.username,r=e.body.liabilityIndex,i=e.body.fieldName,u=e.body.fieldValue;y.default.findOne({username:n},function(e,n){if(n.currentNetworth[0].liabilities.length>r){var o=n.currentNetworth[0].liabilities[r];o[i]=u}var s=n.currentNetworth[0].liabilities[n.currentNetworth[0].liabilities.length-1];return""==s.type&&""==s.description&&0==s.remaining_amount||n.currentNetworth[0].liabilities.push({type:"",description:"",remaining_amount:0,index:s.index+1}),n.save(),t.status(200).json(n)})}),N.delete("/liability",function(e,t){if(!e.body)return t.status(400).json({message:"No request body"});var n=e.body.username,r=e.body.liabilityIndex;y.default.findOne({username:n},function(e,n){if(n.currentNetworth[0].liabilities.length>r){var i=n.currentNetworth[0].liabilities[r];i.remove()}var u={type:"",description:"",remaining_amount:0};if(0==n.currentNetworth[0].liabilities.length)u.index=0,n.currentNetworth[0].liabilities.push(u);else{var o=n.currentNetworth[0].liabilities[n.currentNetworth[0].liabilities.length-1];""==o.type&&""==o.description&&0==o.remaining_amount||(u.index=o.index+1,n.currentNetworth[0].liabilities.push(u))}return n.save(),t.status(200).json(n)})}),N.put("/asset",function(e,t){if(!e.body)return t.status(400).json({message:"No request body"});var n=e.body.username,r=e.body.assetIndex,i=e.body.fieldName,u=e.body.fieldValue;y.default.findOne({username:n},function(e,n){if(n.currentNetworth[0].assets.length>r){var o=n.currentNetworth[0].assets[r];o[i]=u}var s=n.currentNetworth[0].assets[n.currentNetworth[0].assets.length-1];return""==s.type&&""==s.description&&0==s.net_value||n.currentNetworth[0].assets.push({type:"",description:"",net_value:0,index:s.index+1}),n.save(),t.status(200).json(n)})}),N.delete("/asset",function(e,t){if(!e.body)return t.status(400).json({message:"No request body"});var n=e.body.username,r=e.body.assetIndex;y.default.findOne({username:n},function(e,n){if(n.currentNetworth[0].assets.length>r){var i=n.currentNetworth[0].assets[r];i.remove()}var u={type:"",description:"",net_value:0};if(0==n.currentNetworth[0].assets.length)u.index=0,n.currentNetworth[0].assets.push(u);else{var o=n.currentNetworth[0].assets[n.currentNetworth[0].assets.length-1];""==o.type&&""==o.description&&0==o.net_value||(u.index=o.index+1,n.currentNetworth[0].assets.push(u))}return n.save(),t.status(200).json(n)})}),t.default=N}).call(t,n(1),n(5)(e))},function(e,t,n){(function(t){function r(){}function i(){f.log.apply(f,arguments)}function u(){f.log.apply(f,arguments)}function o(){f.warn.apply(f,arguments)}function s(e){b[e]=y()}function a(e){var t=b[e];if(!t)throw new Error("No such label: "+e);var n=y()-t;f.log(e+": "+n+"ms")}function l(){var e=new Error;e.name="Trace",e.message=p.format.apply(null,arguments),f.error(e.stack)}function d(e){f.log(p.inspect(e)+"\n")}function c(e){if(!e){var t=h.call(arguments,1);m.ok(!1,p.format.apply(null,t))}}var f,p=n(2),m=n(3),y=n(4),h=Array.prototype.slice,b={};f="undefined"!=typeof t&&t.console?t.console:"undefined"!=typeof window&&window.console?window.console:{};for(var v=[[r,"log"],[i,"info"],[u,"warn"],[o,"error"],[s,"time"],[a,"timeEnd"],[l,"trace"],[d,"dir"],[c,"assert"]],g=0;g<v.length;g++){var w=v[g],N=w[0],_=w[1];f[_]||(f[_]=N)}e.exports=f}).call(t,function(){return this}())},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("assert")},function(e,t){e.exports=require("date-now")},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("mongoose")},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("bcryptjs")},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),u=r(i),o=n(9),s=r(o),a=n(11),l=r(a),d=new u.default.Schema({username:{type:String,required:!0,unique:!0},firstname:{type:String,required:!1,unique:!1},lastname:{type:String,required:!1,unique:!1},password:{type:String,required:!0},currentNetworth:[l.default],netWorth:[{year:Number,month:Number,details:[l.default]}]});d.methods.validatePassword=function(e,t){s.default.compare(e,this.password,function(e,n){return e?void t(e):void t(null,n)})};var c=u.default.model("User",d);t.default=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),u=r(i),o=n(12),s=r(o),a=n(13),l=r(a),d=n(14),c=r(d),f=new u.default.Schema({liabilities:[s.default],assets:[l.default],stats:[c.default]});u.default.model("Networth",f);t.default=f},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),u=r(i),o=new u.default.Schema({type:{type:String,required:!1},description:{type:String,required:!1,unique:!1},remaining_amount:{type:Number,required:!1,unique:!1},index:{type:Number,required:!0,unique:!0}});u.default.model("Liability",o);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),u=r(i),o=new u.default.Schema({type:{type:String,required:!1},description:{type:String,required:!1,unique:!1},net_value:{type:Number,required:!1,unique:!1},index:{type:Number,required:!0,unique:!0}});u.default.model("Asset",o);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),u=r(i),o=new u.default.Schema({net:{type:Number,required:!1},totalDebt:{type:Number,required:!1,unique:!1},totalAssets:{type:Number,required:!1,unique:!1}});u.default.model("Stats",o);t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),u=r(i),o=n(17),s=r(o),a=n(18),l=r(a),d=n(10),c=r(d),f=(s.default.BasicStrategy,l.default.Strategy),p=new f("local",function(e,t,n){c.default.findOne({username:e},function(e,r){return e?n(e):r?void r.validatePassword(t,function(e,t){return null===e&&t?n(null,r):n('{"error":"Invalid Password"}',!1)}):n('{"error":"User does not exist"}',!1)})});u.default.serializeUser(function(e,t){t(null,e.id)}),u.default.deserializeUser(function(e,t){c.default.findById(e,function(e,n){t(e,n)})}),u.default.use(p),t.default=u.default},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("passport-http")},function(e,t){e.exports=require("passport-local")},function(e,t,n){(function(e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={DATABASE_URL:e.env.DATABASE_URL||n.DATABASE_URL||("production"===e.env.NODE_ENV?"mongodb://test:test@ds119768.mlab.com:19768/worthysum-mlab":"mongodb://localhost/worthysum-dev"),PORT:e.env.PORT||3001}}).call(t,n(20),function(){return this}())},function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(d===setTimeout)return setTimeout(e,0);if((d===n||!d)&&setTimeout)return d=setTimeout,setTimeout(e,0);try{return d(e,0)}catch(t){try{return d.call(null,e,0)}catch(t){return d.call(this,e,0)}}}function u(e){if(c===clearTimeout)return clearTimeout(e);if((c===r||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(e);try{return c(e)}catch(t){try{return c.call(null,e)}catch(t){return c.call(this,e)}}}function o(){y&&p&&(y=!1,p.length?m=p.concat(m):h=-1,m.length&&s())}function s(){if(!y){var e=i(o);y=!0;for(var t=m.length;t;){for(p=m,m=[];++h<t;)p&&p[h].run();h=-1,t=m.length}p=null,y=!1,u(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var d,c,f=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:n}catch(e){d=n}try{c="function"==typeof clearTimeout?clearTimeout:r}catch(e){c=r}}();var p,m=[],y=!1,h=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];m.push(new a(e,t)),1!==m.length||y||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}}]));
//# sourceMappingURL=server.min.js.map